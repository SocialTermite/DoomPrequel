//
//  DPViewController.swift
//  DoomPrequel
//
//  Created by Konstantin Bondar on 12.07.19.
//  Copyright Â© 2019 SocialTermite. All rights reserved.
//

import UIKit
import RxSwift

class DPViewController : UIViewController {
    let trash = DisposeBag()
    override func viewDidLoad() {
        super.viewDidLoad()
        setupBackground()
    }
    
    init() {
        super.init(nibName: nil, bundle: nil)
    }
    
    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
    
    override var preferredStatusBarStyle: UIStatusBarStyle {
        return .lightContent
    }
    
    
    private func setupBackground() {
        let background = UIImageView(image: UIImage(named: "background")!)
        background.contentMode = .scaleAspectFill
        view.addSubview(background)
        background.snp.makeConstraints { maker in
            maker.edges.equalToSuperview()
        }
    }
}

extension UINavigationBar {
    func installBlurEffect() {
        isTranslucent = true
        setBackgroundImage(UIImage(), for: .default)
        let statusBarHeight: CGFloat = UIApplication.shared.statusBarFrame.height
        var blurFrame = bounds
        blurFrame.size.height += statusBarHeight
        blurFrame.origin.y -= statusBarHeight
        let blurView  = UIVisualEffectView(effect: UIBlurEffect(style: .dark))
        blurView.isUserInteractionEnabled = false
        blurView.frame = blurFrame
        blurView.autoresizingMask = [.flexibleWidth, .flexibleHeight]
        addSubview(blurView)
        blurView.layer.zPosition = -1
    }
}
